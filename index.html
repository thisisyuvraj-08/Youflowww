<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouFloww: The Ultimate Pomodoro Timer for Deep Focus</title>
    <meta name="description" content="Boost your productivity with YouFloww, the advanced Pomodoro timer with unique features to help you achieve a state of flow and eliminate distractions.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V3CLSWYVTF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-V3CLSWYVTF');
    </script>
</head>
<body>
<!-- YouTube Video Background - always at back -->
<div id="video-background-container"></div>
<video id="video" width="720" height="560" autoplay muted playsinline class="hidden"></video>
<canvas id="pose-canvas" class="hidden"></canvas>
<div id="face-detection-status" class="face-status-prompt hidden"></div>

<!-- Firebase Auth Modal -->
<div id="authModal" class="modal visible">
    <div class="modal-content auth-container">
        <div id="auth-form-container">
            <!-- Sign Up Form -->
            <form id="signup-form" class="auth-form">
                <h2>Create Your YouFloww Account</h2>
                <input type="email" id="signup-email" placeholder="Email Address" required>
                <input type="password" id="signup-password" placeholder="Password (min. 6 characters)" required>
                <select id="signup-location" class="auth-select" required>
                    <option value="" disabled selected>Where are you from?</option>
                    <option value="indian">India</option>
                    <option value="non-indian">Outside India</option>
                </select>
                <button type="submit">Sign Up</button>
                <p class="auth-switch">Already have an account? <a href="#" id="show-login">Log In</a></p>
            </form>
            <!-- Login Form -->
            <form id="login-form" class="auth-form hidden">
                <h2>Welcome Back!</h2>
                <input type="email" id="login-email" placeholder="Email Address" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button type="submit">Log In</button>
                <p class="auth-switch">Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>
            </form>
            <!-- Guest Mode Button and Warning -->
            <button id="continueWithoutSignupBtn" class="auth-btn-guest" type="button">
                Continue without signing up
            </button>
            <p id="guestWarning" class="auth-warning hidden">
                <strong>Warning:</strong> Your stats and tasks will NOT be saved after you close this tab.
            </p>
            <p id="auth-error" class="error-message"></p>
        </div>
    </div>
</div>

<!-- Main App Content (Initially Hidden) -->
<div id="app-container" class="hidden">
    <header class="top-bar">
        <div class="profile-greeting">
            <span>Welcome, </span>
            <span id="profileNameDisplay">Floww User</span>
            <button id="changeNameBtn" class="btn-icon" aria-label="Change Name">‚úèÔ∏è</button>
        </div>
        <div class="header-controls">
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScLU0kaf55JTMKH2XaavMzygMUJQZGeZAqgKxrAC8PXrYtuQA/viewform?usp=header" target="_blank" id="feedback-link" class="header-btn">
                Feedback üìù
            </a>
            <div id="streak-counter">
                <span id="streak-emoji">üî•</span>
                <span id="streak-count">0</span>
            </div>
            <button id="statsBtn" class="header-btn">Customize</button>
            <button id="logoutBtn" class="header-btn btn-danger">Logout</button>
        </div>
    </header>
    <main>
        <section id="timer-section">
            <div id="status">Work Session</div>
            <div id="timer">25:00</div>
            <div class="timer-controls">
                <button id="resetBtn" class="btn-icon" aria-label="Reset Timer" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>
                </button>
                <button id="playPauseBtn" aria-label="Start Timer">
                    <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    <svg id="pauseIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                </button>
                <button id="endSessionBtn" class="btn-icon" aria-label="End Session" disabled>
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"/></svg>
                </button>
            </div>
        </section>
        <section id="features-section">
            <div id="todo-container">
                <h2>üéØ To-Do List</h2>
                <div id="todo-input-container">
                    <input type="text" id="todo-input" placeholder="Add a new task..." aria-label="Add a new task">
                    <button id="add-todo-btn">Add</button>
                </div>
                <ul id="todo-list" class="sortable-list"></ul>
                <button class="clear-todos-btn">Clear All Tasks</button>
            </div>
            <div class="controls-container">
                <h2>‚ú® Ambience & Display</h2>
                <div class="control-group">
                    <button id="focusModeBtn">Enter Focus Mode</button>
                    <button id="noiseBtn">üéß Play Noise</button>
                    <button id="pipYoutubeBtn">üé¨ Video Player</button>
                </div>
                <div class="control-group">
                     <button id="snowBtn" class="ambience-toggle-btn">‚ùÑÔ∏è Snow</button>
                     <button id="rainBtn" class="ambience-toggle-btn">üåßÔ∏è Rain</button>
                     <button id="sakuraBtn" class="ambience-toggle-btn">üå∏ Sakura</button>
                </div>
            </div>
        </section>
        
        <!-- New Journal Section -->
        <section id="journal-section" class="hidden">
            <div class="journal-header">
                <div class="journal-date-display">
                    <div class="journal-day">SAT</div>
                    <div class="journal-full-date">September 2025</div>
                </div>
                <div class="journal-greeting">
                    <div>Good Evening,</div>
                    <div id="journal-username">yuvraj1234</div>
                </div>
            </div>
            
            <div class="journal-main-content">
                <div class="journal-left-panel">
                    <div class="journal-card">
                        <h3><i class="fas fa-bullseye"></i> My Goal üí°</h3>
                        <p>What is your main goal for today?</p>
                        <div class="goal-input-container">
                            <textarea id="daily-goal" placeholder="Write your goal here..." maxlength="100"></textarea>
                            <div class="goal-counter"><span id="goal-char-count">0</span>/100</div>
                        </div>
                        <div class="past-entries-link">
                            <a href="#"><i class="fas fa-history"></i> Past Entries</a>
                        </div>
                    </div>
                    
                    <div class="journal-card">
                        <h3><i class="fas fa-chart-line"></i> Focus Score</h3>
                        <div class="focus-score-display">
                            <div class="score-ring">
                                <div class="ring-progress" data-progress="3">
                                    <span>3%</span>
                                </div>
                            </div>
                            <div class="score-details">
                                <div class="score-label">Productivity</div>
                                <div class="score-trend">Trending up by 2200X</div>
                                <div class="score-compared">compared to yesterday</div>
                                <div class="focus-time">Focus Time: 23 Mins / 19 Hrs 3 Mins</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="journal-right-panel">
                    <div class="journal-card">
                        <h3><i class="fas fa-calendar-alt"></i> Today, 20 September</h3>
                        <div class="today-prompt">
                            <p>How can you ensure you stay focused on what truly matters today?</p>
                        </div>
                        <div class="journal-entry-area">
                            <textarea id="journal-entry" placeholder="Write your journal entry here..." maxlength="1024"></textarea>
                            <div class="entry-actions">
                                <div class="char-counter"><span id="journal-char-count">0</span>/1024 characters</div>
                                <button id="save-journal-btn" class="journal-save-btn">
                                    <i class="fas fa-save"></i> Save Entry
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mood-section">
                        <h3><i class="fas fa-smile"></i> Mood</h3>
                        <div class="mood-options">
                            <div class="mood-option" data-mood="1">üò¢</div>
                            <div class="mood-option" data-mood="2">üòî</div>
                            <div class="mood-option" data-mood="3" data-selected="true">üòê</div>
                            <div class="mood-option" data-mood="4">üòä</div>
                            <div class="mood-option" data-mood="5">üòÑ</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- New Timetable Section -->
        <section id="timetable-section" class="hidden">
            <div class="timetable-header">
                <h2><i class="fas fa-calendar-alt"></i> Weekly Schedule</h2>
                <div class="timetable-controls">
                    <div class="week-navigation">
                        <button id="prev-week-btn" class="week-nav-btn"><i class="fas fa-chevron-left"></i></button>
                        <span id="current-week-display">Sep 15 - Sep 21, 2025</span>
                        <button id="next-week-btn" class="week-nav-btn"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <button id="add-timeslot-btn" class="timetable-action-btn">
                        <i class="fas fa-plus"></i> Add Time Slot
                    </button>
                </div>
            </div>
            
            <div class="timetable-content">
                <div class="timetable-days-header">
                    <div class="time-column"></div>
                    <div class="day-header" data-day="monday">
                        <div class="day-name">Mon</div>
                        <div class="day-date">15</div>
                    </div>
                    <div class="day-header" data-day="tuesday">
                        <div class="day-name">Tue</div>
                        <div class="day-date">16</div>
                    </div>
                    <div class="day-header" data-day="wednesday">
                        <div class="day-name">Wed</div>
                        <div class="day-date">17</div>
                    </div>
                    <div class="day-header" data-day="thursday">
                        <div class="day-name">Thu</div>
                        <div class="day-date">18</div>
                    </div>
                    <div class="day-header" data-day="friday">
                        <div class="day-name">Fri</div>
                        <div class="day-date">19</div>
                    </div>
                    <div class="day-header" data-day="saturday">
                        <div class="day-name">Sat</div>
                        <div class="day-date">20</div>
                    </div>
                    <div class="day-header" data-day="sunday">
                        <div class="day-name">Sun</div>
                        <div class="day-date">21</div>
                    </div>
                </div>
                
                <div class="timetable-grid">
                    <div class="time-labels">
                        <!-- Time labels will be generated dynamically -->
                    </div>
                    
                    <div class="timetable-days">
                        <div class="timetable-day" data-day="monday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="tuesday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="wednesday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="thursday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="friday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="saturday">
                            <!-- Time slots will be added here -->
                        </div>
                        <div class="timetable-day" data-day="sunday">
                            <!-- Time slots will be added here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add Time Slot Modal -->
            <div id="add-timeslot-modal" class="modal">
                <div class="modal-content timeslot-modal">
                    <span class="close-btn">&times;</span>
                    <h3>Add New Time Slot</h3>
                    <form id="timeslot-form">
                        <div class="form-group">
                            <label for="timeslot-day">Day</label>
                            <select id="timeslot-day" required>
                                <option value="monday">Monday</option>
                                <option value="tuesday">Tuesday</option>
                                <option value="wednesday">Wednesday</option>
                                <option value="thursday">Thursday</option>
                                <option value="friday">Friday</option>
                                <option value="saturday">Saturday</option>
                                <option value="sunday">Sunday</option>
                            </select>
                        </div>
                        <div class="form-group double-column">
                            <div>
                                <label for="timeslot-start">Start Time</label>
                                <input type="time" id="timeslot-start" required>
                            </div>
                            <div>
                                <label for="timeslot-end">End Time</label>
                                <input type="time" id="timeslot-end" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="timeslot-activity">Activity</label>
                            <input type="text" id="timeslot-activity" placeholder="What are you doing?" required>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-cancel">Cancel</button>
                            <button type="submit" class="btn-primary">Add Time Slot</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Stats Modal -->
<div id="statsModal" class="modal">
    <div class="modal-content stats-modal">
        <span class="close-btn">&times;</span>
        <h2>Your Productivity Analytics üìà</h2>
        
        <div class="stats-tabs">
            <div class="stats-tab active" data-tab="overview">Overview</div>
            <div class="stats-tab" data-tab="daily">Daily</div>
            <div class="stats-tab" data-tab="weekly">Weekly</div>
            <div class="stats-tab" data-tab="achievements">Achievements</div>
        </div>
        
        <div class="stats-content">
            <div class="stats-overview active" data-tab-content="overview">
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="stat-current-streak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-value" id="stat-best-streak">0</div>
                        <div class="stat-label">Best Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-value" id="stat-total-focus">0h 0m</div>
                        <div class="stat-label">Total Focus</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="stat-total-sessions">0</div>
                        <div class="stat-label">Total Sessions</div>
                    </div>
                </div>
                
                <div class="stats-charts">
                    <div class="chart-container">
                        <h3>Focus Distribution</h3>
                        <canvas id="focus-distribution-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Daily Average</h3>
                        <canvas id="daily-average-chart"></canvas>
                    </div>
                </div>
                
                <div class="stats-highlights">
                    <div class="stat-highlight">
                        <div class="highlight-icon">üëë</div>
                        <div class="highlight-content">
                            <div class="highlight-title">Longest Focus Session</div>
                            <div class="highlight-value" id="longest-session">0 minutes</div>
                        </div>
                    </div>
                    <div class="stat-highlight">
                        <div class="highlight-icon">üìÖ</div>
                        <div class="highlight-content">
                            <div class="highlight-title">Most Productive Day</div>
                            <div class="highlight-value" id="most-productive-day">Monday</div>
                        </div>
                    </div>
                    <div class="stat-highlight">
                        <div class="highlight-icon">üåÖ</div>
                        <div class="highlight-content">
                            <div class="highlight-title">Best Time of Day</div>
                            <div class="highlight-value" id="best-time-of-day">Morning</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats-daily hidden" data-tab-content="daily">
                <div class="daily-header">
                    <h3>Today's Focus</h3>
                    <div class="date-display" id="today-date">September 20, 2025</div>
                </div>
                
                <div class="daily-stats">
                    <div class="daily-stat">
                        <div class="daily-stat-value" id="today-focus-time">0h 0m</div>
                        <div class="daily-stat-label">Focus Time</div>
                    </div>
                    <div class="daily-stat">
                        <div class="daily-stat-value" id="today-sessions">0</div>
                        <div class="daily-stat-label">Sessions</div>
                    </div>
                    <div class="daily-stat">
                        <div class="daily-stat-value" id="today-completion">0%</div>
                        <div class="daily-stat-label">Goal Completion</div>
                    </div>
                </div>
                
                <div class="daily-timeline">
                    <h4>Today's Timeline</h4>
                    <div class="timeline-container" id="today-timeline">
                        <!-- Timeline items will be added here -->
                    </div>
                </div>
            </div>
            
            <div class="stats-weekly hidden" data-tab-content="weekly">
                <div class="weekly-header">
                    <h3>Weekly Performance</h3>
                    <div class="week-display" id="current-week-display-stats">Sep 15 - Sep 21, 2025</div>
                </div>
                
                <div class="weekly-chart">
                    <canvas id="weekly-focus-chart"></canvas>
                </div>
                
                <div class="weekly-summary">
                    <div class="weekly-summary-item">
                        <div class="summary-value" id="weekly-total-focus">0h 0m</div>
                        <div class="summary-label">Total Focus</div>
                    </div>
                    <div class="weekly-summary-item">
                        <div class="summary-value" id="weekly-avg-focus">0h 0m</div>
                        <div class="summary-label">Daily Average</div>
                    </div>
                    <div class="weekly-summary-item">
                        <div class="summary-value" id="weekly-sessions">0</div>
                        <div class="summary-label">Total Sessions</div>
                    </div>
                </div>
            </div>
            
            <div class="stats-achievements hidden" data-tab-content="achievements">
                <h3>Your Achievements</h3>
                <div class="achievements-grid">
                    <div class="achievement-item locked">
                        <div class="achievement-icon">üî•</div>
                        <div class="achievement-info">
                            <div class="achievement-title">7-Day Streak</div>
                            <div class="achievement-desc">Maintain a 7-day focus streak</div>
                        </div>
                    </div>
                    <div class="achievement-item locked">
                        <div class="achievement-icon">‚è∞</div>
                        <div class="achievement-info">
                            <div class="achievement-title">Early Bird</div>
                            <div class="achievement-desc">Complete a session before 8 AM</div>
                        </div>
                    </div>
                    <div class="achievement-item locked">
                        <div class="achievement-icon">üéØ</div>
                        <div class="achievement-info">
                            <div class="achievement-title">Focused</div>
                            <div class="achievement-desc">Complete a 60-minute session</div>
                        </div>
                    </div>
                    <div class="achievement-item locked">
                        <div class="achievement-icon">üìÖ</div>
                        <div class="achievement-info">
                            <div class="achievement-title">Consistent</div>
                            <div class="achievement-desc">Focus for 5 days in a row</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- macOS Dock Navigation -->
<nav id="mac-dock">
    <div class="dock-container">
        <div class="dock-item" data-section="timer">
            <div class="dock-icon">
                <i class="fas fa-clock"></i>
            </div>
            <span class="dock-label">Timer</span>
        </div>
        <div class="dock-item" data-section="todo">
            <div class="dock-icon">
                <i class="fas fa-tasks"></i>
            </div>
            <span class="dock-label">Tasks</span>
        </div>
        <div class="dock-item" data-section="journal">
            <div class="dock-icon">
                <i class="fas fa-book"></i>
            </div>
            <span class="dock-label">Journal</span>
        </div>
        <div class="dock-item" data-section="timetable">
            <div class="dock-icon">
                <i class="fas fa-calendar"></i>
            </div>
            <span class="dock-label">Schedule</span>
        </div>
        <div class="dock-item" data-section="stats">
            <div class="dock-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <span class="dock-label">Stats</span>
        </div>
    </div>
</nav>

<audio id="whiteNoise" loop><source src="whitenoise.mp3" type="audio/mpeg"></audio>
<audio id="pauseAlertSound"><source src="https://actions.google.com/sounds/v1/ui/close_button_pressed.ogg" type="audio/ogg"></audio>
<audio id="resumeAlertSound"><source src="https://actions.google.com/sounds/v1/ui/button_press.ogg" type="audio/ogg"></audio>
<audio class="start-sound-indian" src="start-sound1.mp3"></audio>
<audio class="start-sound-indian" src="start-sound2.mp3"></audio>
<audio class="start-sound-indian" src="start-sound3.mp3"></audio>
<audio class="start-sound-indian" src="start-sound4.mp3"></audio>
<audio class="good-meme-indian" src="good-meme1.mp3"></audio>
<audio class="good-meme-indian" src="good-meme2.mp3"></audio>
<audio class="good-meme-indian" src="good-meme3.mp3"></audio>
<audio class="good-meme-indian" src="good-meme4.mp3"></audio>
<audio class="bad-meme-indian" src="bad-meme1.mp3"></audio>
<audio class="bad-meme-indian" src="bad-meme2.mp3"></audio>
<audio class="bad-meme-indian" src="bad-meme3.mp3"></audio>
<audio class="bad-meme-indian" src="bad-meme4.mp3"></audio>
<audio class="start-sound-non-indian" src="https://github.com/ishaanx/pomodoro-accountability-sounds/raw/main/start.mp3"></audio>
<audio class="good-meme-non-indian" src="https://github.com/ishaanx/pomodoro-accountability-sounds/raw/main/good.mp3"></audio>
<audio class="bad-meme-non-indian" src="https://github.com/ishaanx/pomodoro-accountability-sounds/raw/main/bad.mp3"></audio>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js" type="module"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js" type="module"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js" type="module"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script src="script.js" type="module"></script>
</body>
</html>
